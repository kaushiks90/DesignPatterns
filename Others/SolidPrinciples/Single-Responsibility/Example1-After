using System;
using System.Collections.Generic;
using System.IO;

namespace DesignPatterns {

    public class Journal {
        private readonly List<string> entries = new List<string> ();

        private static int count = 0;

        public int AddEntry (string text) {
            entries.Add ($"{++count}: {text}");
            return count; // memento pattern!
        }

        public void RemoveEntry (int index) {
            entries.RemoveAt (index);
        }

        public override string ToString () {
            return string.Join (Environment.NewLine, entries);
        }

    }
    class Persistence {
        public void SaveToFile (Journal journal, string filename, bool overwrite = false) {
            if (overwrite || !File.Exists (filename))
                File.WriteAllText (filename, journal.ToString ());
        }
        public void Save (string filename, bool overwrite = false) {
            File.WriteAllText (filename, ToString ());
        }

    }
    class LoadData {

        public void Load (string filename) {

        }

        public void Load (Uri uri) {

        }
    }
    class Program {
        static void Main (string[] args) {
            var j = new Journal ();
            j.AddEntry ("I cried today.");
            j.AddEntry ("I ate a bug.");
            System.Console.WriteLine (j);

            Persistence persistence = new Persistence ();
            var filename = @"c:\temp\journal.txt";
            persistence.SaveToFile (j, filename);
            Console.ReadLine ();
        }
    }

}